<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>S4M73l09 Portfolio ‚Äî ES</title>
  <meta name="description" content="Portfolio DevOps & Cloud: Terraform, Ansible, Azure, CI/CD, Observabilidad." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{ --bg:#0b0e14; --txt:#e2e8f0; --muted:#9aa4b2; --btn-bg:#1e293b; --btn-hover:#334155; --info:#38bdf8 }
    *{box-sizing:border-box}
    body{ margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; background:#0b0e14; color:var(--txt) }
    header{ position:sticky; top:0; z-index:50; backdrop-filter:saturate(140%) blur(10px); background:rgba(11,14,20,.8); border-bottom:1px solid rgba(255,255,255,.06) }
    .bar{ max-width:1100px; margin:0 auto; padding:14px 20px; display:flex; align-items:center; justify-content:space-between; gap:12px }
    .left{ display:flex; align-items:center; gap:12px }
    .logo{ font-weight:800; font-size:1.05rem }
    .btn-small{ padding:8px 12px; border-radius:10px; border:1px solid rgba(255,255,255,.15); background:transparent; color:var(--txt); cursor:pointer; font-weight:600 }
    .btn-small:hover{ border-color:rgba(255,255,255,.35) }
    .lang-switch{ display:flex; gap:10px; align-items:center }
    .chip{ padding:8px 12px; border-radius:999px; border:1px solid rgba(255,255,255,.15); background:transparent; color:var(--txt); cursor:pointer; font-weight:600 }
    .chip.active{ background:rgba(37,99,235,.4); border-color:transparent }
    .wrap{ max-width:1100px; margin:0 auto; padding:88px 20px 24px }
    .content{ background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01)); border:1px solid rgba(255,255,255,.08); border-radius:18px; padding:24px; line-height:1.8 }
    .content a{ color:#93c5fd }
    footer{ margin-top:20px; text-align:center; color:var(--muted) }
    .contact-buttons{ margin-top:10px; display:flex; gap:12px; justify-content:center; flex-wrap:wrap }
    .btn{ display:inline-block; padding:8px 14px; border-radius:8px; text-decoration:none; font-weight:600; background:#1e293b; color:var(--txt) }
    .btn:hover{ background:#334155 }
    .backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.45); opacity:0; pointer-events:none; transition:opacity .2s; z-index:60 }
    .backdrop.open{ opacity:1; pointer-events:auto }
    .drawer{ position:fixed; top:0; right:0; height:100%; width:min(420px,92vw); background:rgba(14,18,27,.98); border-left:1px solid rgba(255,255,255,.08); transform:translateX(100%); transition:transform .25s ease; z-index:61; display:flex; flex-direction:column }
    .drawer.open{ transform:translateX(0) }
    .drawer-head{ display:flex; align-items:center; justify-content:space-between; padding:16px 18px; border-bottom:1px solid rgba(255,255,255,.08) }
    .proj-list{ display:grid; gap:12px }
  </style>
</head>
<body>
  <header>
    <div class="bar">
      <div class="left">
        <div class="logo" id="logo">S4M73l09 Infra Portfolio</div>
        <button id="btn-projects" class="btn-small">üìÅ Proyectos</button>
      </div>
      <nav class="nav" aria-label="Site">
        <button class="btn-small" id="btn-overview" aria-current="page">üìÑ Overview</button>
        <button class="btn-small" id="btn-services">üíº Servicios</button>
      </nav>
      <div class="lang-switch" role="group" aria-label="Selector de idioma">
        <button class="chip" id="chip-es" type="button" aria-pressed="true">ES</button>
        <button class="chip" id="chip-en" type="button" aria-pressed="false">EN</button>
      </div>
    </div>
  </header>

  <div class="wrap">
    <main class="content" id="content">Cargando contenido‚Ä¶</main>
    <main class="content" id="services" hidden>Cargando servicios‚Ä¶</main>

    <footer>
      ¬© <span id="year"></span> ‚Äî Portfolio DevOps & Cloud
      <div class="contact-buttons">
        <a class="btn" id="gmail-btn" target="_blank" rel="noopener noreferrer">üìß Abrir en Gmail</a>
        <a class="btn" id="mailto-btn">‚úâÔ∏è Contactar por correo</a>
        <a class="btn" id="github-btn" target="_blank" rel="noopener noreferrer">üêô GitHub</a>
        <a class="btn" id="linkedin-btn" target="_blank" rel="noopener noreferrer">üíº LinkedIn</a>
      </div>
    </footer>
  </div>

  <div class="backdrop" id="backdrop"></div>
  <aside class="drawer" id="drawer">
    <div class="drawer-head">
      <div class="drawer-title" id="drawer-title">Proyectos</div>
      <button class="btn-small" id="btn-close">‚úï</button>
    </div>
    <div class="drawer-body">
      <div id="projects-desc" style="color:var(--muted); margin:0 0 10px 2px;"></div>
      <div class="proj-list" id="proj-list"></div>
    </div>
  </aside>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    // ===== Ajustes b√°sicos =====
    var email       = 'saminfradevops@gmail.com';
    var githubURL   = 'https://github.com/S4M73l09';
    var linkedinURL = 'https://www.linkedin.com/in/samuelillobaby/';

    document.getElementById('year').textContent = new Date().getFullYear();
    document.getElementById('gmail-btn').href  = 'https://mail.google.com/mail/?view=cm&fs=1&to=' + email;
    document.getElementById('mailto-btn').href = 'mailto:' + email;
    document.getElementById('github-btn').href = githubURL;
    document.getElementById('linkedin-btn').href = linkedinURL;

    var chipEs = document.getElementById('chip-es');
    var chipEn = document.getElementById('chip-en');
    var contentEl = document.getElementById('content');
    var servicesEl = document.getElementById('services');
    var btnOverview = document.getElementById('btn-overview');
    var btnServices = document.getElementById('btn-services');

    function setDocLang(lang){
      document.documentElement.lang = (lang==='en') ? 'en' : 'es';
      chipEs.classList.toggle('active', lang==='es');
      chipEn.classList.toggle('active', lang==='en');
      chipEs.setAttribute('aria-pressed', lang==='es');
      chipEn.setAttribute('aria-pressed', lang==='en');
    }

    function fetchMarkdown(file, target){
      target.innerHTML = 'Cargando‚Ä¶';
      fetch(file, {cache:'no-store'})
        .then(function(res){ if(!res.ok) throw new Error('No se pudo cargar ' + file); return res.text(); })
        .then(function(md){ marked.setOptions({gfm:true, breaks:true}); target.innerHTML = marked.parse(md); })
        .catch(function(e){ target.innerHTML = '<p style="color:#fca5a5">'+e.message+'</p>'; });
    }

    function showSection(section){
      var sec = (section === 'services') ? 'services' : 'overview';
      contentEl.hidden  = (sec !== 'overview');
      servicesEl.hidden = (sec !== 'services');
      btnOverview.setAttribute('aria-current', sec==='overview' ? 'page' : 'false');
      btnServices.setAttribute('aria-current', sec==='services' ? 'page' : 'false');
      var url = new URL(location.href);
      url.searchParams.set('section', sec);
      history.replaceState({}, '', url);
      window.scrollTo({top:0, behavior:'smooth'});
    }

    chipEs.addEventListener('click', function(){ setDocLang('es'); fetchMarkdown('README.md', contentEl); fetchMarkdown('SERVICES.md', servicesEl); });
    chipEn.addEventListener('click', function(){ setDocLang('en'); fetchMarkdown('README.en.md', contentEl); fetchMarkdown('SERVICES.en.md', servicesEl); });
    btnOverview.addEventListener('click', function(){ showSection('overview'); });
    btnServices.addEventListener('click', function(){ showSection('services'); });

    // Inicio: lee par√°metros
    var params = new URLSearchParams(location.search);
    var initialLang = (params.get('lang') || 'es').toLowerCase();
    var initialSection = (params.get('section') || 'overview').toLowerCase();
    setDocLang(initialLang);
    fetchMarkdown(initialLang==='en' ? 'README.en.md' : 'README.md', contentEl);
    fetchMarkdown(initialLang==='en' ? 'SERVICES.en.md' : 'SERVICES.md', servicesEl);
    showSection(initialSection);
  </script>

  <script>
  // Upwork-safe mode: ocultar contactos cuando ?upwork=1
  (function(){
    try{
      var q = new URLSearchParams(location.search);
      if (q.get('upwork') !== '1') return;
      var selectors = ['#gmail-btn','#mailto-btn','#linkedin-btn','a[href^="mailto:"]','a[href*="linkedin.com"]','a[href*="malt."]','[data-contact]','.contact'];
      var nodes = document.querySelectorAll(selectors.join(','));
      for (var i=0;i<nodes.length;i++){ nodes[i].remove(); }
    }catch(e){}
  })();
  </script>
</body>
</html>
